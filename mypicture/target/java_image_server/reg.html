<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <link rel="stylesheet" type="text/css" href="./NewLogin.css"/>
    <meta charset="UTF-8">
    <title>注册</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/vue.js"></script>
</head>
<body>
<div id="app" >
    <h2>用户注册</h2>
    <form v-on:submit.prevent="login()">
        用户名：<input type="text" v-model="username">
        <br><br>
        密&nbsp;&nbsp;&nbsp;码：<input type="password" v-model="password">
        <p style="color: #ff0000">{{message}}</p>
        <br><br>
        <input type="submit" value=注册>
    </form>
</div>
<script>
    let app = new Vue({
        el: "#app",
        data: {
            username: '',
            password: '',
            password2: '',
            message: ''
        },
        methods: {
            login: function () {
                // alert(this.username+", "+this.password)
                $.ajax({
                    url: "reg",
                    type: "post",
                    data: "username="+app.username+"&password="+app.password,
                    context: this,
                    success: function(data, status) {
                        //如果登录成功，跳转到首页
                        if(data.ok){
                            alert("恭喜：注册成功");
                            window.location.href = "login.html";
                        }else{//登录失败，提示错误信息
                            app.message = data.msg;
                        }
                    }
                })
            }
        }
    });
</script>
</body>
</html>